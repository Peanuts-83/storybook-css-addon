import n,{useState,useLayoutEffect,useEffect}from'react';import {addons,types,useStorybookState,useParameter}from'storybook/internal/manager-api';import {Code}from'storybook/internal/components';import {styled}from'storybook/internal/theming';var p=(o,t,e)=>{let[l,a]=useState("");return useEffect(()=>{(async()=>{let s=e?.debug||false;try{if(t)if(e){if(!e.format)throw new Error("no extension format available !")}else throw new Error("no config available !");else throw new Error("no story id !");let r=t;if(e.fileRegex){let i=new RegExp(e.fileRegex.in);i.test(r)?(s&&console.log(`Regex [${JSON.stringify(e.fileRegex)}] applying to : ${r}`),r=r.replace(i,e.fileRegex.out)):s&&console.warn(`Regex did not match: ${e.fileRegex.in}, storyId: ${t}`);}else r=r.split("--")[0];s&&console.log(`Style file name: ${r}.${e.format}`);let m="";try{let i=await fetch(`./assets/stylesForPreview/${r}.${e.format}`);i.ok&&(m=await i.text());}catch(i){s&&console.warn(`Failed to fetch ./assets/stylesForPreview/${r}.${e.format}:`,i);}a(m);}catch(r){s&&console.error(r),a("No style available for this story.");}})();},[t,o,e]),l};var v=styled.div(({theme:o})=>({background:o.background.content,minHeight:"100vh",boxSizing:"border-box",position:"absolute",top:0})),S=styled.div({maxWidth:768,marginLeft:"auto",marginRight:"auto",marginTop:"4rem"}),g=({active:o})=>{let{storyId:t}=useStorybookState(),[e,l]=useState(null),a=useParameter("cssViewerConfig");useLayoutEffect(()=>{a&&l(a);},[a,t]);let f=p(o,t,e);return !o||e?.ignore?.some(s=>t.includes(s))?null:n.createElement(v,null,n.createElement(S,null,f?n.createElement(Code,null,f):n.createElement("p",null,"No style available for this story.")))};addons.register("CSS-viewer",o=>{addons.add("CSS-viewer/tab",{type:types.TAB,title:"CSS",render:({active:t})=>n.createElement(g,{active:t||false})});});//# sourceMappingURL=manager.js.map
//# sourceMappingURL=manager.js.map